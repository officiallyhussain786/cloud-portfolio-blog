---
import Layout from "../layouts/layout.astro";
---

<Layout>
  <main class="relative min-h-screen flex flex-col items-center justify-center bg-black px-6 gap-8 selection:bg-white/20 overflow-hidden">

    <!-- Background Grid -->
    <div class="absolute inset-0 z-0 bg-[linear-gradient(to_right,#ffffff03_1px,transparent_1px),linear-gradient(to_bottom,#ffffff03_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,#000_70%,transparent_100%)]"></div>

    <!-- Avatar -->
    <div class="group relative animate-float z-10">
      <div class="absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full blur opacity-0 group-hover:opacity-100 transition duration-1000"></div>

      <div
        class="relative w-28 h-28 md:w-32 md:h-32
               rounded-full overflow-hidden
               bg-neutral-900
               ring-1 ring-white/10
               transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)]
               group-hover:-translate-y-2
               group-hover:shadow-[0_20px_40px_rgba(0,0,0,0.4),0_0_20px_rgba(255,255,255,0.1)]
               group-hover:ring-white/30"
      >
        <img
          src="/profile-pixel.png"
          alt="Hussain's avatar"
          class="w-full h-full object-cover grayscale-[20%] group-hover:grayscale-0 transition-all duration-700"
        />
      </div>
    </div>

    <!-- Identity -->
    <div class="flex flex-col items-center gap-3 z-10">
      <h1 class="text-2xl md:text-3xl font-bold tracking-tight text-white font-mono">
        <span id="typewriter"></span>
        <span
          id="cursor"
          class="ml-1 inline-block w-[2px] h-[1em] bg-white animate-pulse align-middle"
        ></span>
      </h1>

      <p
        id="intro"
        class="text-center max-w-md text-sm md:text-base leading-relaxed text-white/50 opacity-0 translate-y-4 transition-all duration-1000 ease-out"
      >
        Cloud & Platform Engineer crafting scalable systems and production-ready
        infrastructure. Focused on <span class="text-white/80">AWS</span>,
        <span class="text-white/80">automation</span>, and building things that last.
      </p>
    </div>

    <!-- CTA -->
    <div
      id="nav"
      class="flex gap-4 opacity-0 translate-y-4 transition-all duration-1000 delay-300 ease-out z-10"
    >
      <a
        href="https://github.com/officiallyhussain786"
        target="_blank"
        class="px-6 py-2.5 rounded-full border border-white/10 text-sm font-medium text-white/60 transition-all hover:text-white hover:border-white/40 hover:shadow-[0_0_20px_rgba(255,255,255,0.1)]"
      >
        Projects
      </a>

      <a
        href="/blog"
        class="px-6 py-2.5 rounded-full border border-white/10 text-sm font-medium text-white/60 transition-all hover:text-white hover:border-white/40 hover:shadow-[0_0_20px_rgba(255,255,255,0.1)]"
      >
        Blog
      </a>
    </div>

    <!-- Status -->
    <div class="absolute bottom-10 flex items-center gap-3 text-[10px] uppercase tracking-[0.25em] text-white/20 font-mono z-10">
      <div class="flex h-2 w-2 relative">
        <div class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-40"></div>
        <div class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></div>
      </div>

      <span>Systems Operational</span>
      <span class="opacity-30">//</span>
      <span id="region-tag">Region: Detecting...</span>
    </div>

    <!-- Scripts -->
    <script>
      // Typewriter
      const text = "Hi, I'm Hussain";
      const el = document.getElementById("typewriter");
      const intro = document.getElementById("intro");
      const nav = document.getElementById("nav");
      const cursor = document.getElementById("cursor");

      let index = 0;

      function type() {
        if (index < text.length) {
          el.textContent += text.charAt(index);
          index++;
          const delay = Math.floor(Math.random() * (95 - 60 + 1) + 60);
          setTimeout(type, delay);
        } else {
          setTimeout(() => {
            cursor.style.display = "none";
            intro.classList.remove("opacity-0", "translate-y-4");
            nav.classList.remove("opacity-0", "translate-y-4");
          }, 300);
        }
      }

      // Region detection
      function detectRegion() {
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || "";

        const regionMap = {
          "Asia/Kolkata": "ap-south-1",
          "Europe/Amsterdam": "eu-central-1",
          "Asia/Dubai": "me-central-1",
          "America/New_York": "us-east-1",
          "Europe/London": "eu-west-2"
        };

        if (regionMap[tz]) return regionMap[tz];
        if (tz.includes("Asia")) return "ap-southeast-1";
        if (tz.includes("Europe")) return "eu-west-1";
        return "us-east-1";
      }

      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(type, 600);

        const regionEl = document.getElementById("region-tag");
        if (regionEl) {
          regionEl.textContent = `Region: ${detectRegion().toUpperCase()}`;
        }
      });
    </script>

  </main>
</Layout>

<style is:global>
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-7px); }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-float {
      animation: none;
    }
  }

  html {
    scroll-behavior: smooth;
    background: black;
  }
</style>
